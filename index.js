(()=>{"use strict";class e{constructor(e,s){this.app=e,this.name=s,this.igorsRun=null,this.hitCounter=0,this.text="Ну вот! Игорь наказан! Он обещает измениться и стать лучше! Молодец, дорогой друг! А теперь хули ты тут в телефоне тыкаешься иди работай давай!!!",this.Preface=new t(this.text),this.igorStep1='<div class="igor-step-1"></div>',this.igorStep2='<div class="igor-step-2"></div>',this.igorStep3='<div class="igor-step-3"></div>',this.igorStep4='<div class="igor-step-4"></div>',this.renderGameField(),this.nul=null}renderGameField(){this.html='<div class="game">\n        <div class="user-and-score">\n            <span class="user-name">Павел</span>\n            <span class="score">0</span>\n        </div>\n\n        <div class="gameField">\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n            <div class="gameField__item"></div>\n        </div>\n    </div>',this.app.insertAdjacentHTML("beforeend",this.html),this.cells=Array.from(this.app.querySelectorAll(".gameField__item")),this.user=this.app.querySelector(".user-name"),this.score=this.app.querySelector(".score"),this.user.textContent=this.name,this.player=new Audio("../sounds/benny.mp3"),this.player.volume=.2,this.player.addEventListener("ended",(()=>{this.player.currentTime=0,this.player.play()})),this.hitIgor(this.igorStep1,"igor-step-1")}startGame(e,t,s){this.player.play(),this.cells[0].innerHTML=e,this.igorsRun=setInterval((()=>{let s=Math.floor(9*Math.random()+0);document.querySelector(`.${t}`).remove(),this.cells[s].innerHTML=e}),s)}hitIgor(e,t){this.startGame(e,t,500),this.gameField=this.app.querySelector(".gameField"),this.score.textContent=this.hitCounter,this.gameField.addEventListener("click",(e=>{if(e.target.classList.contains("igor-step-1")||e.target.classList.contains("igor-step-2")||e.target.classList.contains("igor-step-3")){if(9===this.hitCounter)return console.log("Функция где игорь просит о помощи"),clearInterval(this.igorsRun),document.querySelector(".igor-step-1").remove(),this.igorAsksForHelp("Посоны не бейти a, лутше абассссыти!!!",450,"igor-step-2",this.igorStep2,"step-2.png","play"),this.hitCounter=10,void(this.score.textContent=this.hitCounter);if(19===this.hitCounter)return console.log("3ий уровень"),clearInterval(this.igorsRun),document.querySelector(".igor-step-2").remove(),this.igorAsksForHelp("У сука! Ща так побегу...",400,"igor-step-3",this.igorStep3,"step-3.png","play"),this.hitCounter=20,void(this.score.textContent=this.hitCounter);if(24===this.hitCounter)return clearInterval(this.igorsRun),document.querySelector(".game").remove(),void this.igorAsksForHelp("Аааааа.... блэть!!! Больно сцуко!!!",300,"igor-step-4",this.igorStep4,"step-4.png","over");this.hitCounter+=1,this.score.textContent=this.hitCounter,this.punchVoice()}}))}punchVoice(){this.PunchPlayer=new Audio("../sounds/punch.mp3"),this.PunchPlayer.volume=1,this.PunchPlayer.play()}igorAsksForHelp(e,t,s,i,r,n){this.player.pause();const a=`<div class="igor-help">\n        <div class="igor-help__text-box">\n            <span class="text-box__text"></span>\n        </div>\n\n        <div class="igor-help__box">\n            <img src="./images/${r}" class="igor-help__img">\n        </div>\n     </div>`;this.app.insertAdjacentHTML("afterbegin",a);const o=new Audio("../sounds/game-over.mp3");o.play(),o.addEventListener("ended",(()=>{o.currentTime=0,o.play()})),this.textBox=this.app.querySelector(".text-box__text");const l=Array.from(e);let h=0;const c=setInterval((()=>{if(this.textBox.textContent.length===l.length)return clearInterval(c),void setTimeout((()=>{if(document.querySelector(".igor-help").remove(),o.pause(),"over"===n)return clearInterval(c),this.player.pause(),void this.Preface.renderPreface("over");this.startGame(i,s,t)}),3e3);this.textBox.textContent+=l[h],h++}),200)}}class t{constructor(e){this.app=document.querySelector(".app"),this.text=Array.from(e)}renderPreface(e){this.app.insertAdjacentHTML("beforeend",'<div class="preface">\n        <div class="preface__text-box">\n                <span class="text-box__text"></span>\n                <div class="youname-box hidden">\n                    <input type="text" class="youname" autofocus>\n                    <div class="enter-youname"></div>\n                </div>\n        </div>\n\n        <div class="avtor-box">\n            <img src="./images/avtor.png" class="avtor">\n        </div>\n    </div>'),this.audio(),this.printText(e)}printText(e){this.textBox=this.app.querySelector(".text-box__text");let t=0;const s=setInterval((()=>{if(this.textBox.textContent.length===this.text.length){if(clearInterval(s),this.youNameBox=this.app.querySelector(".youname-box"),"over"===e)return;return this.youNameBox.classList.remove("hidden"),void this.enterName()}this.textBox.textContent+=this.text[t],t++}),50)}enterName(){this.youName=this.app.querySelector(".youname"),this.enterNameBtn=this.app.querySelector(".enter-youname"),this.enterNameBtn.addEventListener("click",(()=>{0!==this.youName.length&&(this.name=this.youName.value,this.name=this.name.toUpperCase(),"ИГОРЬ"===this.name||"IGOR"===this.name?alert("Игорь!!! Иди работай! Какие игры? Ты заявку написал?! Работать!!!"):(this.player.pause(),this.app.querySelector(".preface").remove(),new e(this.app,this.name)))}))}audio(){this.player=new Audio("../sounds/circus.mp3"),this.player.play()}}new class{constructor(){this.text="Привет, дорогой друг! Сегодня, у тебя есть возможность надавть Игорю по щам! Игорь - весьма не приятная щеклея, вечно болтает по телефону, избегает работы, врет, изворачивается и все в таком духе. Давай накажем его! Напиши свое имя, и погнали!",this.Preface=new t(this.text),this.startBtn=document.querySelector(".start-btn"),this.startGame()}startGame(){this.startBtn.addEventListener("click",(()=>{document.querySelector(".container").remove(),this.Preface.renderPreface("play")}))}}})();